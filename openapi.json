{
  "openapi": "3.0.0",
  "info": {
    "version": "1.2.2",
    "title": "Tango API",
    "description": "This is a sample for Tango API"
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://tango.md/ru/"
      }
    },
    {
      "name": "Me",
      "description": "Everything about your user",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://tango.md/ru/"
      }
    },
    {
      "name": "Commons",
      "description": "Everything else",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://tango.md/ru/"
      }
    },
    {
      "name": "Operations",
      "description": "Operations",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://tango.md"
      }
    },
    {
      "name": "Transfers",
      "description": "Transfers",
      "externalDocs": {
        "description": "Find out more",
        "url": "http://tango.md"
      }
    }
  ],
  "paths": {
    "/registration": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Registers user",
        "description": "Create your user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/customer_basic_fields"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "password": {
                        "description": "The user password",
                        "type": "string",
                        "format": "password",
                        "example": "mystrongpassword1111"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Authorization": {
                "schema": {
                  "type": "string",
                  "example": "Bearer <TOKEN>"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/authorization": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Autorize user",
        "description": "Autorize your user and get JWT token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "email": {
                    "description": "The user mail",
                    "type": "string",
                    "format": "email",
                    "example": "john.doe@gmail.com"
                  },
                  "password": {
                    "description": "The user password",
                    "type": "string",
                    "format": "password",
                    "example": "mystrongpassword1111"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "Authorization": {
                "schema": {
                  "type": "string",
                  "example": "Bearer <TOKEN>"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/me": {
      "get": {
        "tags": [
          "Me"
        ],
        "summary": "User full info",
        "description": "Get your user full info. May require password or some sort of additional validation in future. IN PROGRESS",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/customer_full_profile"
                }
              }
            }
          }
        }
      }
    },
    "/me/short": {
      "get": {
        "tags": [
          "Me"
        ],
        "summary": "User short info",
        "description": "Get your user short info. Reasoning behind this method - allow some level of user info exposure without additional validation except already used JWT. Full user info may require additional validation in future.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "properties": {
                    "firstname": {
                      "description": "The user first name",
                      "type": "string",
                      "example": "John"
                    },
                    "lastname": {
                      "description": "The user last name",
                      "type": "string",
                      "example": "Doe"
                    },
                    "avatar": {
                      "description": "The user avatar url",
                      "type": "string",
                      "format": "url",
                      "example": "https://vignette.wikia.nocookie.net/southpark/images/9/95/Kyle-broflovski.png/revision/latest?cb=20190411033301"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/advertising": {
      "get": {
        "tags": [
          "Commons"
        ],
        "summary": "Advertising",
        "description": "Get advertising info",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/advertising"
                  }
                },
                "examples": {
                  "expected": {
                    "value": [
                      {
                        "type": "browser",
                        "url": "<some url 1>",
                        "image_url": "<some image url 1>"
                      },
                      {
                        "type": "browser",
                        "url": "<some url 2>",
                        "image_url": "<some image url 2>"
                      },
                      {
                        "type": "container",
                        "url": "<some url 3>",
                        "image_url": "<some image url 3>",
                        "header": "<some header 3>"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/agents": {
      "get": {
        "tags": [
          "Commons"
        ],
        "summary": "Agents list",
        "description": "Get agents list",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/agent"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/locations": {
      "get": {
        "tags": [
          "Commons"
        ],
        "summary": "Locations list",
        "description": "Get locations list",
        "parameters": [
          {
            "in": "query",
            "name": "search",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Za-z]+"
            },
            "example": "lon"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/city"
                  }
                },
                "examples": {
                  "expected": {
                    "value": [
                      {
                        "id": "9eb5fd41-16f8-430c-91b7-a69ad1fd4c89",
                        "code": "KIV",
                        "name": "Kishinev",
                        "country": {
                          "id": "5d54dad8-f05c-499c-b2d1-b1ae7c0ca4ae",
                          "code": "MDA",
                          "name": "Moldova"
                        }
                      },
                      {
                        "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                        "code": "ROM",
                        "name": "ROME",
                        "country": {
                          "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                          "code": "ITA",
                          "name": "Italy"
                        }
                      },
                      {
                        "id": "98ad3e5c-3882-4002-b9c4-bcf97556f735",
                        "code": "NY",
                        "name": "New York",
                        "country": {
                          "id": "8a83d6fb-8732-496e-a8ff-0ec20215b1eb",
                          "code": "USA",
                          "name": "United States"
                        }
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/currencies": {
      "get": {
        "tags": [
          "Commons"
        ],
        "summary": "Available transfer currencies",
        "description": "Get available transfer currencies",
        "parameters": [
          {
            "in": "query",
            "name": "for",
            "schema": {
              "type": "string",
              "enum": [
                "sends",
                "payouts",
                "transfers",
                "payments"
              ],
              "example": "transfers"
            },
            "required": false,
            "description": "To filter currencies required only for certain area. If not specified all available currencies will be returned."
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "description": "Operation currency code",
                    "type": "string",
                    "pattern": "^[A-Z]{3}$"
                  }
                },
                "examples": {
                  "expected": {
                    "value": [
                      "EUR",
                      "USD",
                      "MDL"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/correspondents": {
      "get": {
        "tags": [
          "Transfers"
        ],
        "summary": "Available correspondents list",
        "description": "Get correspondents list",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "created": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/correspondent"
                      }
                    },
                    "generated": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/correspondent"
                      }
                    }
                  }
                },
                "examples": {
                  "expected": {
                    "value": {
                      "created": [
                        {
                          "id": "08af1651-affd-4e87-88cf-3ccc5269858c",
                          "firstname": "Bill",
                          "lastname": "Doe",
                          "location": {
                            "id": "98ad3e5c-3882-4002-b9c4-bcf97556f735",
                            "code": "NY",
                            "name": "New York",
                            "country": {
                              "id": "8a83d6fb-8732-496e-a8ff-0ec20215b1eb",
                              "code": "USA",
                              "name": "United States"
                            }
                          },
                          "is_user": false
                        },
                        {
                          "id": "a531b9f3-822d-4817-9641-f628a984d1aa",
                          "firstname": "Jhon",
                          "lastname": "Smith",
                          "location": {
                            "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                            "code": "ROM",
                            "name": "ROME",
                            "country": {
                              "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                              "code": "ITA",
                              "name": "Italy"
                            }
                          },
                          "is_user": false
                        }
                      ],
                      "generated": [
                        {
                          "id": "f42e5570-0b04-4973-898f-445f342a0954",
                          "firstname": "Jack",
                          "lastname": "Black",
                          "location": {
                            "id": "9eb5fd41-16f8-430c-91b7-a69ad1fd4c89",
                            "code": "KIV",
                            "name": "Kishinev",
                            "country": {
                              "id": "5d54dad8-f05c-499c-b2d1-b1ae7c0ca4ae",
                              "code": "MDA",
                              "name": "Moldova"
                            }
                          },
                          "is_user": true,
                          "phone": "37369000001"
                        },
                        {
                          "id": "12419fe5-2771-4212-bbaf-ab626bb11d03",
                          "firstname": "Piter",
                          "lastname": "Banner",
                          "location": {
                            "id": "9eb5fd41-16f8-430c-91b7-a69ad1fd4c89",
                            "code": "KIV",
                            "name": "Kishinev",
                            "country": {
                              "id": "5d54dad8-f05c-499c-b2d1-b1ae7c0ca4ae",
                              "code": "MDA",
                              "name": "Moldova"
                            }
                          },
                          "is_user": true,
                          "phone": "37369000002"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/transfers/tunnels": {
      "get": {
        "tags": [
          "Transfers"
        ],
        "summary": "Available tunnels list",
        "description": "Get transfers tunnels list",
        "parameters": [
          {
            "in": "query",
            "name": "destination[id]",
            "description": "Destination location",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "d290f1ee-6c54-4b01-90e6-d701748f0851"
            }
          },
          {
            "in": "query",
            "name": "amount",
            "description": "Send amount",
            "required": true,
            "schema": {
              "type": "number",
              "format": "double",
              "example": 54.3
            }
          },
          {
            "in": "query",
            "name": "currency",
            "description": "Send currency",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z]{3}$",
              "example": "USD"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/transfer_send_contract"
                  }
                },
                "examples": {
                  "expected": {
                    "value": [
                      {
                        "id": "6c87f227-6ac1-4cdc-8566-f8f29f9f1763",
                        "name": "CMT ITA USD EUR",
                        "organization": {
                          "id": "6dc6e864-4155-4d57-8c46-b9034f6d9ec1",
                          "code": "CMT",
                          "name": "Custom Money Transfer"
                        },
                        "receive_amount": 39.48,
                        "receive_currency": "EUR",
                        "send_amount": 54.3,
                        "send_currency": "USD",
                        "exchange_rate": 0.7271,
                        "fee_amount": 3,
                        "total_send_amount": 57.3,
                        "updated": "2019-08-02T08:57:59.375Z"
                      },
                      {
                        "id": "baa3a9ae-524f-4fd6-855a-b6791463784e",
                        "name": "CMT ITA USD USD",
                        "organization": {
                          "id": "6dc6e864-4155-4d57-8c46-b9034f6d9ec1",
                          "code": "CMT",
                          "name": "Custom Money Transfer"
                        },
                        "receive_amount": 54.3,
                        "receive_currency": "USD",
                        "send_amount": 54.3,
                        "send_currency": "USD",
                        "exchange_rate": 1,
                        "fee_amount": 1.5,
                        "total_send_amount": 55.8,
                        "updated": "2019-08-02T08:57:59.375Z"
                      },
                      {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA USD EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "receive_amount": 39.5,
                        "receive_currency": "EUR",
                        "send_amount": 54.3,
                        "send_currency": "USD",
                        "exchange_rate": 0.7275,
                        "fee_amount": 2,
                        "total_send_amount": 56.3,
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    ]
                  }
                }
              }
            }
          }
        }
      }
    },
    "/sends": {
      "post": {
        "tags": [
          "Transfers"
        ],
        "summary": "Create send",
        "description": "Create new send",
        "parameters": [
          {
            "in": "query",
            "name": "preferred_agent[id]",
            "description": "Id of an agent to start deal with",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "014d81df-ff4b-4580-9adf-a7379e888caa"
            }
          },
          {
            "in": "query",
            "name": "amount",
            "description": "Send amount",
            "required": false,
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/amount"
                }
              ],
              "example": 100
            }
          },
          {
            "in": "query",
            "name": "currency",
            "description": "Send currency",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/currency_code"
            }
          },
          {
            "in": "query",
            "name": "receiver[id]",
            "description": "Transfer receiver",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "df9d59bc-a237-4972-9b09-08ffdc01a399"
            }
          },
          {
            "in": "query",
            "name": "destination[id]",
            "description": "Destination location",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "d290f1ee-6c54-4b01-90e6-d701748f0851"
            }
          },
          {
            "in": "query",
            "name": "contract[id]",
            "description": "Contract with system, rate and fee",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "ff530c93-c7d5-46b9-ad66-88706003aded"
            }
          },
          {
            "in": "query",
            "name": "status",
            "description": "Status of document",
            "required": false,
            "schema": {
              "type": "string",
              "allOf": [
                {
                  "$ref": "#/components/schemas/operation_status"
                }
              ],
              "example": "ready",
              "default": "created"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "preferred_agent": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of an agent to start deal with",
                    "example": {
                      "id": "014d81df-ff4b-4580-9adf-a7379e888caa"
                    }
                  },
                  "amount": {
                    "description": "Amount to send",
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/amount"
                      }
                    ],
                    "example": 100
                  },
                  "currency": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/currency_code"
                      }
                    ],
                    "description": "Currency code of the operation",
                    "example": "USD"
                  },
                  "destination": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a destination city where to send money",
                    "example": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b"
                    }
                  },
                  "receiver": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a correspondent/receviver",
                    "example": {
                      "id": "df9d59bc-a237-4972-9b09-08ffdc01a399"
                    }
                  },
                  "contract": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a selected transfer options",
                    "example": {
                      "id": "ff530c93-c7d5-46b9-ad66-88706003aded"
                    }
                  },
                  "status": {
                    "type": "string",
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/operation_status"
                      }
                    ],
                    "example": "ready",
                    "default": "created"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/send"
                },
                "examples": {
                  "full": {
                    "value": {
                      "id": "49b63448-650d-4e33-a5a6-d7258724d618",
                      "alias": "QSC2774402",
                      "type": "send",
                      "status": "ready",
                      "created": "2019-08-02T08:57:59.375Z",
                      "modified": "2019-08-02T08:57:59.375Z",
                      "is_finalized": false,
                      "preferred_agent": {
                        "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                        "name": "Atlantis Art Materials",
                        "address": "28 Tabernacle St, London EC2A 4DD, UK",
                        "phone": "+44 20 7377 8855",
                        "latitude": 51.52283,
                        "longitude": -0.08553,
                        "website": "http://tango.md",
                        "distance": 0.02562311926132259,
                        "service": "send, payout, payment",
                        "working_hours": "9:00AM-6:00PM"
                      },
                      "amount": 100,
                      "currency": "USD",
                      "destination": {
                        "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                        "code": "LN",
                        "name": "Lonigo",
                        "country": {
                          "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                          "code": "ITA",
                          "name": "Italy"
                        }
                      },
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "receiver": {
                        "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                        "firstname": "Jane",
                        "lastname": "Doe",
                        "phone": "+44 20 1311 7711",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        },
                        "is_user": true
                      },
                      "contract": {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "send_amount": 100,
                        "send_currency": "USD",
                        "receive_amount": 72.71,
                        "receive_currency": "EUR",
                        "exchange_rate": 0.7271,
                        "fee_amount": 1.5,
                        "total_send_amount": 101.5,
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/sends/{send_id}": {
      "post": {
        "tags": [
          "Transfers"
        ],
        "summary": "Update send",
        "description": "Update existing send",
        "parameters": [
          {
            "in": "path",
            "name": "send_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "49b63448-650d-4e33-a5a6-d7258724d618"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "preferred_agent": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of an agent to start deal with",
                    "example": {
                      "id": "014d81df-ff4b-4580-9adf-a7379e888caa"
                    }
                  },
                  "amount": {
                    "description": "Amount to send",
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/amount"
                      }
                    ],
                    "example": 100
                  },
                  "currency": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/currency_code"
                      }
                    ],
                    "description": "Currency code of the operation",
                    "example": "USD"
                  },
                  "destination": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a destination city where to send money",
                    "example": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b"
                    }
                  },
                  "receiver": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a correspondent/receviver",
                    "example": {
                      "id": "df9d59bc-a237-4972-9b09-08ffdc01a399"
                    }
                  },
                  "contract": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of a selected transfer options",
                    "example": {
                      "id": "ff530c93-c7d5-46b9-ad66-88706003aded"
                    }
                  },
                  "status": {
                    "type": "string",
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/operation_status"
                      }
                    ],
                    "example": "ready",
                    "default": "created"
                  }
                },
                "example": {
                  "preferred_agent": {
                    "id": "014d81df-ff4b-4580-9adf-a7379e888caa"
                  },
                  "destination": {
                    "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Operation exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/send"
                },
                "example": {
                  "id": "49b63448-650d-4e33-a5a6-d7258724d618",
                  "alias": "QSC2774402",
                  "type": "send",
                  "status": "created",
                  "created": "2019-08-02T08:57:59.375Z",
                  "modified": "2019-08-02T08:57:59.375Z",
                  "is_finalized": false,
                  "preferred_agent": {
                    "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                    "name": "Atlantis Art Materials",
                    "address": "28 Tabernacle St, London EC2A 4DD, UK",
                    "phone": "+44 20 7377 8855",
                    "latitude": 51.52283,
                    "longitude": -0.08553,
                    "website": "http://tango.md",
                    "distance": 0.02562311926132259,
                    "service": "send, payout, payment",
                    "working_hours": "9:00AM-6:00PM"
                  },
                  "destination": {
                    "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                    "code": "LN",
                    "name": "Lonigo",
                    "country": {
                      "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                      "code": "ITA",
                      "name": "Italy"
                    }
                  },
                  "sender": {
                    "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                    "firstname": "John",
                    "lastname": "Doe",
                    "phone": "+44 20 7377 8855",
                    "location": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                      "code": "LN",
                      "name": "Lonigo",
                      "country": {
                        "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                        "code": "ITA",
                        "name": "Italy"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/payouts/search": {
      "get": {
        "tags": [
          "Transfers"
        ],
        "summary": "Search available sends by code and generate payout",
        "description": "Search available sends by code and generate payout document",
        "parameters": [
          {
            "in": "query",
            "name": "code",
            "description": "Send identifier in money transfer system",
            "required": true,
            "schema": {
              "type": "string",
              "example": "SIG826345"
            }
          },
          {
            "in": "query",
            "name": "organization[id]",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "example": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e"
            }
          },
          {
            "in": "query",
            "name": "amount",
            "description": "Send amount",
            "required": true,
            "schema": {
              "allOf": [
                {
                  "$ref": "#/components/schemas/amount"
                }
              ],
              "example": 100
            }
          },
          {
            "in": "query",
            "name": "currency",
            "description": "Send currency",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/currency_code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Send exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/payout"
                },
                "example": {
                  "id": "9a708769-776c-48e3-b19a-bbc5395ab365",
                  "alias": "QSC9237461",
                  "type": "payout",
                  "status": "created",
                  "created": "2019-08-05T08:57:59.375Z",
                  "modified": "2019-08-05T08:57:59.375Z",
                  "is_finalized": false,
                  "code": "FT23098230757",
                  "preferred_agent": {
                    "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                    "name": "Atlantis Art Materials",
                    "address": "28 Tabernacle St, London EC2A 4DD, UK",
                    "phone": "+44 20 7377 8855",
                    "latitude": 51.52283,
                    "longitude": -0.08553,
                    "website": "http://tango.md",
                    "distance": 0.02562311926132259,
                    "service": "send, payout, payment",
                    "working_hours": "9:00AM-6:00PM"
                  },
                  "sender": {
                    "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                    "firstname": "John",
                    "lastname": "Doe",
                    "phone": "+44 20 7377 8855",
                    "location": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                      "code": "LN",
                      "name": "Lonigo",
                      "country": {
                        "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                        "code": "ITA",
                        "name": "Italy"
                      }
                    }
                  },
                  "receiver": {
                    "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                    "firstname": "Jane",
                    "lastname": "Doe",
                    "phone": "+44 20 1311 7711",
                    "location": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                      "code": "LN",
                      "name": "Lonigo",
                      "country": {
                        "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                        "code": "ITA",
                        "name": "Italy"
                      }
                    }
                  },
                  "contract": {
                    "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                    "name": "SIG ITA EUR",
                    "organization": {
                      "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                      "code": "SMT",
                      "name": "Sigue Money Transfer"
                    },
                    "receive_amount": 72.71,
                    "receive_currency": "EUR",
                    "updated": "2019-08-02T08:57:59.375Z"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/payouts/{payout_id}": {
      "post": {
        "tags": [
          "Transfers"
        ],
        "summary": "Update payout",
        "description": "Update existing payout",
        "parameters": [
          {
            "in": "path",
            "name": "payout_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "9a708769-776c-48e3-b19a-bbc5395ab365"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "properties": {
                  "preferred_agent": {
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/identifiable_object"
                      }
                    ],
                    "description": "Id of an agent to start deal with",
                    "example": {
                      "id": "014d81df-ff4b-4580-9adf-a7379e888caa"
                    }
                  },
                  "status": {
                    "type": "string",
                    "allOf": [
                      {
                        "$ref": "#/components/schemas/operation_status"
                      }
                    ],
                    "example": "ready",
                    "default": "created"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/payout"
                },
                "example": {
                  "id": "9a708769-776c-48e3-b19a-bbc5395ab365",
                  "alias": "QSC9237461",
                  "type": "payout",
                  "status": "ready",
                  "created": "2019-08-05T08:57:59.375Z",
                  "modified": "2019-08-05T08:57:59.375Z",
                  "is_finalized": false,
                  "code": "FT23098230757",
                  "preferred_agent": {
                    "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                    "name": "Atlantis Art Materials",
                    "address": "28 Tabernacle St, London EC2A 4DD, UK",
                    "phone": "+44 20 7377 8855",
                    "latitude": 51.52283,
                    "longitude": -0.08553,
                    "website": "http://tango.md",
                    "distance": 0.02562311926132259,
                    "service": "send, payout, payment",
                    "working_hours": "9:00AM-6:00PM"
                  },
                  "sender": {
                    "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                    "firstname": "John",
                    "lastname": "Doe",
                    "phone": "+44 20 7377 8855",
                    "location": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                      "code": "LN",
                      "name": "Lonigo",
                      "country": {
                        "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                        "code": "ITA",
                        "name": "Italy"
                      }
                    }
                  },
                  "receiver": {
                    "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                    "firstname": "Jane",
                    "lastname": "Doe",
                    "phone": "+44 20 1311 7711",
                    "location": {
                      "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                      "code": "LN",
                      "name": "Lonigo",
                      "country": {
                        "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                        "code": "ITA",
                        "name": "Italy"
                      }
                    }
                  },
                  "contract": {
                    "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                    "name": "SIG ITA EUR",
                    "organization": {
                      "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                      "code": "SMT",
                      "name": "Sigue Money Transfer"
                    },
                    "receive_amount": 72.71,
                    "receive_currency": "EUR",
                    "updated": "2019-08-02T08:57:59.375Z"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/operations/{operation_id}": {
      "get": {
        "tags": [
          "Operations"
        ],
        "summary": "Validate operation",
        "description": "Search existing operation",
        "parameters": [
          {
            "in": "path",
            "name": "operation_id",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "6c940cb8-1a3e-43bf-a1f9-8acff2793def"
          },
          {
            "in": "query",
            "name": "type",
            "description": "Expected type of document",
            "required": true,
            "schema": {
              "type": "string",
              "allOf": [
                {
                  "$ref": "#/components/schemas/operation_type"
                }
              ],
              "example": "send"
            }
          },
          {
            "in": "query",
            "name": "ASAP",
            "description": "As Soon As Possible. If this parameter is set to false instead of returning current state of document and then requesting update on server in background request will be performed, document updated and only then user will receive response.",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Operation exists",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/send"
                    },
                    {
                      "$ref": "#/components/schemas/payout"
                    }
                  ]
                },
                "examples": {
                  "minimal_send_created": {
                    "value": {
                      "id": "49b63448-650d-4e33-a5a6-d7258724d618",
                      "alias": "QSC2774402",
                      "type": "send",
                      "status": "created",
                      "created": "2019-08-02T08:57:59.375Z",
                      "modified": "2019-08-02T08:57:59.375Z",
                      "is_finalized": false,
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      }
                    }
                  },
                  "send_ready": {
                    "value": {
                      "id": "49b63448-650d-4e33-a5a6-d7258724d618",
                      "alias": "QSC2774402",
                      "type": "send",
                      "status": "ready",
                      "created": "2019-08-02T08:57:59.375Z",
                      "modified": "2019-08-02T08:57:59.375Z",
                      "is_finalized": false,
                      "preferred_agent": {
                        "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                        "name": "Atlantis Art Materials",
                        "address": "28 Tabernacle St, London EC2A 4DD, UK",
                        "phone": "+44 20 7377 8855",
                        "latitude": 51.52283,
                        "longitude": -0.08553,
                        "website": "http://tango.md",
                        "distance": 0.02562311926132259,
                        "service": "send, payout, payment",
                        "working_hours": "9:00AM-6:00PM"
                      },
                      "amount": 100,
                      "currency": "USD",
                      "destination": {
                        "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                        "code": "LN",
                        "name": "Lonigo",
                        "country": {
                          "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                          "code": "ITA",
                          "name": "Italy"
                        }
                      },
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "receiver": {
                        "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                        "firstname": "Jane",
                        "lastname": "Doe",
                        "phone": "+44 20 1311 7711",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        },
                        "is_user": true
                      },
                      "contract": {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "send_amount": 100,
                        "send_currency": "USD",
                        "receive_amount": 72.71,
                        "receive_currency": "EUR",
                        "exchange_rate": 0.7271,
                        "fee_amount": 1.5,
                        "total_send_amount": 101.5,
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    }
                  },
                  "send_executed": {
                    "value": {
                      "id": "49b63448-650d-4e33-a5a6-d7258724d618",
                      "alias": "QSC2774402",
                      "type": "send",
                      "status": "executed",
                      "created": "2019-08-02T08:57:59.375Z",
                      "modified": "2019-08-02T08:57:59.375Z",
                      "is_finalized": true,
                      "preferred_agent": {
                        "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                        "name": "Atlantis Art Materials",
                        "address": "28 Tabernacle St, London EC2A 4DD, UK",
                        "phone": "+44 20 7377 8855",
                        "latitude": 51.52283,
                        "longitude": -0.08553,
                        "website": "http://tango.md",
                        "distance": 0.02562311926132259,
                        "service": "send, payout, payment",
                        "working_hours": "9:00AM-6:00PM"
                      },
                      "summary": {
                        "executed": "2019-08-02T08:57:59.375Z",
                        "executed_agent": {
                          "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                          "name": "Atlantis Art Materials",
                          "address": "28 Tabernacle St, London EC2A 4DD, UK",
                          "phone": "+44 20 7377 8855",
                          "latitude": 51.52283,
                          "longitude": -0.08553,
                          "website": "http://tango.md",
                          "distance": 0.02562311926132259,
                          "service": "send, payout, payment",
                          "working_hours": "9:00AM-6:00PM"
                        },
                        "code": "FT23098230757"
                      },
                      "amount": 100,
                      "currency": "USD",
                      "destination": {
                        "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                        "code": "LN",
                        "name": "Lonigo",
                        "country": {
                          "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                          "code": "ITA",
                          "name": "Italy"
                        }
                      },
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "receiver": {
                        "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                        "firstname": "Jane",
                        "lastname": "Doe",
                        "phone": "+44 20 1311 7711",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        },
                        "is_user": true
                      },
                      "contract": {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "send_amount": 100,
                        "send_currency": "USD",
                        "receive_amount": 72.71,
                        "receive_currency": "EUR",
                        "exchange_rate": 0.7271,
                        "fee_amount": 1.5,
                        "total_send_amount": 101.5,
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    }
                  },
                  "payout_created": {
                    "value": {
                      "id": "9a708769-776c-48e3-b19a-bbc5395ab365",
                      "alias": "QSC9237461",
                      "type": "payout",
                      "status": "created",
                      "created": "2019-08-05T08:57:59.375Z",
                      "modified": "2019-08-05T08:57:59.375Z",
                      "is_finalized": false,
                      "code": "FT23098230757",
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "receiver": {
                        "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                        "firstname": "Jane",
                        "lastname": "Doe",
                        "phone": "+44 20 1311 7711",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "contract": {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "receive_amount": 72.71,
                        "receive_currency": "EUR",
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    }
                  },
                  "payout_executed": {
                    "value": {
                      "id": "9a708769-776c-48e3-b19a-bbc5395ab365",
                      "alias": "QSC9237461",
                      "type": "payout",
                      "status": "executed",
                      "created": "2019-08-05T08:57:59.375Z",
                      "modified": "2019-08-05T08:57:59.375Z",
                      "is_finalized": true,
                      "code": "FT23098230757",
                      "preferred_agent": {
                        "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                        "name": "Atlantis Art Materials",
                        "address": "28 Tabernacle St, London EC2A 4DD, UK",
                        "phone": "+44 20 7377 8855",
                        "latitude": 51.52283,
                        "longitude": -0.08553,
                        "website": "http://tango.md",
                        "distance": 0.02562311926132259,
                        "service": "send, payout, payment",
                        "working_hours": "9:00AM-6:00PM"
                      },
                      "summary": {
                        "executed": "2019-08-02T08:57:59.375Z",
                        "executed_agent": {
                          "id": "014d81df-ff4b-4580-9adf-a7379e888caa",
                          "name": "Atlantis Art Materials",
                          "address": "28 Tabernacle St, London EC2A 4DD, UK",
                          "phone": "+44 20 7377 8855",
                          "latitude": 51.52283,
                          "longitude": -0.08553,
                          "website": "http://tango.md",
                          "distance": 0.02562311926132259,
                          "service": "send, payout, payment",
                          "working_hours": "9:00AM-6:00PM"
                        }
                      },
                      "sender": {
                        "id": "16f7b78a-5b1f-47a2-9502-162b317f302f",
                        "firstname": "John",
                        "lastname": "Doe",
                        "phone": "+44 20 7377 8855",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "receiver": {
                        "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                        "firstname": "Jane",
                        "lastname": "Doe",
                        "phone": "+44 20 1311 7711",
                        "location": {
                          "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                          "code": "LN",
                          "name": "Lonigo",
                          "country": {
                            "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                            "code": "ITA",
                            "name": "Italy"
                          }
                        }
                      },
                      "contract": {
                        "id": "ff530c93-c7d5-46b9-ad66-88706003aded",
                        "name": "SIG ITA EUR",
                        "organization": {
                          "id": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e",
                          "code": "SMT",
                          "name": "Sigue Money Transfer"
                        },
                        "receive_amount": 72.71,
                        "receive_currency": "EUR",
                        "updated": "2019-08-02T08:57:59.375Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    },
    "/operations": {
      "get": {
        "tags": [
          "Operations"
        ],
        "summary": "Search operations",
        "description": "Search existing operations",
        "parameters": [
          {
            "in": "header",
            "name": "X-Page",
            "schema": {
              "type": "integer",
              "default": 1,
              "example": 5
            },
            "required": false
          },
          {
            "in": "header",
            "name": "X-Page-Size",
            "schema": {
              "type": "integer",
              "default": 100,
              "example": 10
            },
            "required": false
          },
          {
            "in": "query",
            "name": "types",
            "schema": {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "#/components/schemas/operation_type"
              },
              "example": [
                "transfer",
                "payment"
              ],
              "default": [
                "transfer",
                "payment",
                "payout"
              ]
            },
            "description": "Only operation with stated types will be returned. Default value includes all operation types"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "#/components/schemas/operation_status"
              },
              "example": [
                "executed"
              ],
              "default": [
                "created",
                "executed",
                "canceled"
              ]
            },
            "description": "Only operation with stated statuses will be returned. Default value includes all status types"
          },
          {
            "in": "query",
            "name": "from",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2018-07-01T19:13:51.418Z"
            },
            "required": false,
            "description": "If present server will return operations only from (including) this date"
          },
          {
            "in": "query",
            "name": "to",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2019-08-05T11:04:22.397Z"
            },
            "required": false,
            "description": "If present server will return operations only till (excluding) this date"
          },
          {
            "in": "query",
            "name": "ASAP",
            "description": "As Soon As Possible. If this parameter is set to false instead of returning current state of documents and then requesting update on server in background request will be performed, documents updated and only then user will receive response.",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "X-Page": {
                "schema": {
                  "type": "integer",
                  "example": 5
                },
                "description": "Number of returned page"
              },
              "X-Page-Size": {
                "schema": {
                  "type": "integer",
                  "example": 10
                },
                "description": "Number of operations per returned page"
              },
              "X-Page-Count": {
                "schema": {
                  "type": "integer",
                  "example": 15
                },
                "description": "Total number of pages for requested page size"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "$ref": "#/components/schemas/send"
                      },
                      {
                        "$ref": "#/components/schemas/payout"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/unauthorized_error"
          },
          "500": {
            "$ref": "#/components/responses/something_wrong"
          },
          "default": {
            "$ref": "#/components/responses/something_wrong"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "authentication": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "responses": {
      "unauthorized_error": {
        "description": "Authentication information is missing or invalid",
        "headers": {
          "WWW_Authenticate": {
            "schema": {
              "type": "string"
            }
          }
        }
      },
      "something_wrong": {
        "description": "Something went wrong",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "error_code": {
                  "type": "string"
                }
              }
            },
            "examples": {
              "expected": {
                "value": {
                  "error": "<error reason>",
                  "error_code": "<some error code>"
                }
              }
            }
          }
        }
      }
    },
    "schemas": {
      "advertising": {
        "required": [
          "type",
          "url",
          "image_url"
        ],
        "properties": {
          "type": {
            "description": "Advertising type",
            "type": "string",
            "enum": [
              "browser",
              "container"
            ],
            "example": "browser"
          },
          "url": {
            "description": "Advertising url",
            "type": "string",
            "format": "url",
            "example": "https://www.google.com"
          },
          "image_url": {
            "description": "Advertising image url",
            "type": "string",
            "format": "url",
            "example": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/1024px-Google_%22G%22_Logo.svg.png"
          },
          "header": {
            "description": "Advertising header, for container type only",
            "type": "string",
            "example": "Some intresting header"
          }
        }
      },
      "correspondent": {
        "required": [
          "id",
          "firstname",
          "lastname",
          "location",
          "is_user"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "16f7b78a-5b1f-47a2-9502-162b317f302f"
          },
          "firstname": {
            "description": "The user first name",
            "type": "string",
            "example": "John"
          },
          "lastname": {
            "description": "The user last name",
            "type": "string",
            "example": "Doe"
          },
          "location": {
            "$ref": "#/components/schemas/city"
          },
          "is_user": {
            "type": "boolean",
            "description": "Indicates if it is correspondent generated from user based on your phone book"
          },
          "phone": {
            "description": "The user phone",
            "type": "string",
            "format": "phone",
            "example": "+44 20 7377 8855"
          }
        }
      },
      "customer_basic_fields": {
        "required": [
          "firstname",
          "lastname",
          "email",
          "birthdate",
          "gender",
          "phone"
        ],
        "properties": {
          "firstname": {
            "description": "The user first name",
            "type": "string",
            "example": "John"
          },
          "lastname": {
            "description": "The user last name",
            "type": "string",
            "example": "Doe"
          },
          "email": {
            "description": "The user mail",
            "type": "string",
            "format": "email",
            "example": "john.doe@gmail.com"
          },
          "birthdate": {
            "description": "The user birth date",
            "type": "string",
            "format": "date",
            "example": "1970-01-01"
          },
          "gender": {
            "description": "The user gender",
            "type": "string",
            "enum": [
              "male",
              "female"
            ],
            "example": "male"
          },
          "phone": {
            "description": "The user phone",
            "type": "string",
            "format": "phone",
            "example": "+44 20 7377 8855"
          }
        }
      },
      "customer_basic_profile": {
        "required": [
          "id"
        ],
        "allOf": [
          {
            "$ref": "#/components/schemas/customer_basic_fields"
          }
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "16f7b78a-5b1f-47a2-9502-162b317f302f"
          }
        }
      },
      "id_document_type": {
        "allOf": [
          {
            "$ref": "#/components/schemas/identifiable_record"
          }
        ],
        "properties": {
          "id": {
            "example": "6bbfed96-75e3-40b8-a620-0d2524638c9e"
          },
          "code": {
            "description": "Identification document code",
            "example": "NAT"
          },
          "name": {
            "description": "Identification document name",
            "example": "National ID"
          }
        }
      },
      "customer_full_profile": {
        "allOf": [
          {
            "$ref": "#/components/schemas/customer_basic_profile"
          },
          {
            "type": "object",
            "properties": {
              "personal_number": {
                "description": "Social/National/Insurance number",
                "type": "string",
                "example": "SN1998398754"
              },
              "id_document_type": {
                "$ref": "#/components/schemas/id_document_type"
              },
              "id_document_number": {
                "description": "Identification document number",
                "type": "string",
                "example": "AB1299734"
              },
              "location": {
                "description": "Customer resident city",
                "allOf": [
                  {
                    "$ref": "#/components/schemas/city"
                  }
                ]
              }
            }
          }
        ]
      },
      "identifiable_object": {
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "df697a99-634d-4ed7-9fdc-ef8cfb12278e"
          }
        }
      },
      "identifiable_record": {
        "required": [
          "id",
          "name",
          "code"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "df697a99-634d-4ed7-9fdc-ef8cfb12278e"
          },
          "code": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "amount": {
        "type": "number",
        "format": "double",
        "example": 10
      },
      "currency_code": {
        "type": "string",
        "pattern": "^[A-Z]{3}$",
        "example": "USD"
      },
      "country": {
        "allOf": [
          {
            "$ref": "#/components/schemas/identifiable_record"
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "example": "19241586-e09a-4cda-9a34-31561f8097e1"
              },
              "code": {
                "description": "Country code",
                "example": "ITA"
              },
              "name": {
                "description": "Country name",
                "example": "Italy"
              }
            }
          }
        ]
      },
      "city": {
        "required": [
          "country"
        ],
        "allOf": [
          {
            "$ref": "#/components/schemas/identifiable_record"
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "example": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b"
              },
              "code": {
                "description": "City code",
                "example": "LN"
              },
              "name": {
                "description": "City name",
                "example": "Lonigo"
              },
              "country": {
                "$ref": "#/components/schemas/country"
              }
            }
          }
        ]
      },
      "agent": {
        "required": [
          "id",
          "name",
          "address",
          "phone",
          "working_hours",
          "latitude",
          "longitude",
          "distance"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "014d81df-ff4b-4580-9adf-a7379e888caa"
          },
          "name": {
            "description": "Agent name",
            "type": "string",
            "example": "Atlantis Art Materials"
          },
          "address": {
            "description": "Agent address",
            "type": "string",
            "example": "28 Tabernacle St, London EC2A 4DD, UK"
          },
          "phone": {
            "description": "Agent phone",
            "type": "string",
            "format": "phone",
            "example": "+44 20 7377 8855"
          },
          "latitude": {
            "description": "Latitude",
            "type": "number",
            "format": "double",
            "example": 51.52283
          },
          "longitude": {
            "description": "Longitude",
            "type": "number",
            "format": "double",
            "example": -0.08553
          },
          "website": {
            "description": "Agent website",
            "type": "string",
            "format": "url",
            "example": "http://tango.md"
          },
          "distance": {
            "description": "Distance to agent",
            "type": "number",
            "format": "double",
            "example": 0.02562311926132259
          },
          "service": {
            "description": "Services provided by Agent",
            "type": "string",
            "example": "send, payout, payment"
          },
          "working_hours": {
            "description": "Agent working hours. Defined as simple string, but should be implemented as complex object with week days and from and to fields.",
            "type": "string",
            "example": "9:00AM-6:00PM"
          }
        }
      },
      "operation_type": {
        "type": "string",
        "description": "Operation type",
        "enum": [
          "send",
          "payout",
          "payment"
        ]
      },
      "operation_status": {
        "type": "string",
        "description": "Set of common operation states",
        "enum": [
          "created",
          "ready",
          "executed",
          "canceled"
        ]
      },
      "operation_summary": {
        "required": [
          "executed"
        ],
        "properties": {
          "executed": {
            "type": "string",
            "format": "date-time"
          },
          "executed_agent": {
            "allOf": [
              {
                "$ref": "#/components/schemas/agent"
              }
            ],
            "description": "Agent that executed the operation"
          }
        }
      },
      "transfer_payout_summary": {
        "allOf": [
          {
            "$ref": "#/components/schemas/operation_summary"
          }
        ]
      },
      "transfer_send_summary": {
        "required": [
          "code"
        ],
        "allOf": [
          {
            "$ref": "#/components/schemas/operation_summary"
          },
          {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Code assigned to the operation on successful execution. Usually it comdes from external system (eg. Money Transfer System)",
                "example": "FT23098230757"
              }
            }
          }
        ]
      },
      "operation": {
        "required": [
          "id",
          "alias",
          "type",
          "status",
          "created",
          "modified",
          "is_finalized"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "49b63448-650d-4e33-a5a6-d7258724d618"
          },
          "alias": {
            "description": "Human-friendly opeartion alternative name suitalbe for reference to share with others and for manual search",
            "type": "string",
            "example": "QSC2774402"
          },
          "type": {
            "$ref": "#/components/schemas/operation_type"
          },
          "status": {
            "$ref": "#/components/schemas/operation_status"
          },
          "created": {
            "type": "string",
            "format": "date-time"
          },
          "modified": {
            "type": "string",
            "format": "date-time"
          },
          "is_finalized": {
            "type": "boolean",
            "default": false
          },
          "preferred_agent": {
            "allOf": [
              {
                "$ref": "#/components/schemas/agent"
              }
            ],
            "description": "Prefered agent to start deal with. It is not guaranteed that this agent will be finally selected for execution of an operation and servers only as a helper"
          }
        }
      },
      "organization": {
        "allOf": [
          {
            "$ref": "#/components/schemas/identifiable_record"
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "example": "ade01139-965e-4b4d-8128-cfa5ccf9ac3e"
              },
              "code": {
                "description": "Organization short name (code, optional)",
                "example": "SMT"
              },
              "name": {
                "description": "Organization name",
                "example": "Sigue Money Transfer"
              }
            }
          }
        ]
      },
      "transfer_contract": {
        "description": "Base details for the transfer.",
        "required": [
          "id",
          "name",
          "organization",
          "receive_amount",
          "receive_currency"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "example": "ff530c93-c7d5-46b9-ad66-88706003aded"
          },
          "name": {
            "description": "Tunnel name",
            "type": "string",
            "example": "SIG ITA EUR"
          },
          "organization": {
            "$ref": "#/components/schemas/organization"
          },
          "receive_amount": {
            "description": "Destination amount paid to receiver",
            "allOf": [
              {
                "$ref": "#/components/schemas/amount"
              }
            ],
            "example": 72.71
          },
          "receive_currency": {
            "description": "Destination currency code of amount paid to receiver",
            "allOf": [
              {
                "$ref": "#/components/schemas/currency_code"
              }
            ],
            "example": "EUR"
          },
          "updated": {
            "description": "Date of last fee, exchange rate and receive amount recalculation",
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "transfer_payout_contract": {
        "description": "Base details for the transfer.",
        "allOf": [
          {
            "$ref": "#/components/schemas/transfer_contract"
          }
        ]
      },
      "transfer_send_contract": {
        "description": "Proposal details from a certain organization for the requested send transfer.",
        "allOf": [
          {
            "$ref": "#/components/schemas/transfer_payout_contract"
          },
          {
            "type": "object",
            "required": [
              "send_amount",
              "send_currency",
              "exchange_rate",
              "fee_amount",
              "total_send_amount"
            ],
            "properties": {
              "send_amount": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/amount"
                  }
                ],
                "description": "Amount in source currency to send",
                "example": 100
              },
              "send_currency": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/currency_code"
                  }
                ],
                "description": "Currency code of amount to send",
                "example": "USD"
              },
              "exchange_rate": {
                "description": "Exchange rate",
                "type": "number",
                "format": "float",
                "example": 0.7271
              },
              "fee_amount": {
                "description": "Fee amount in source currency",
                "allOf": [
                  {
                    "$ref": "#/components/schemas/amount"
                  }
                ],
                "example": 1.5
              },
              "total_send_amount": {
                "description": "Total amount in source currency to pay including fee",
                "allOf": [
                  {
                    "$ref": "#/components/schemas/amount"
                  }
                ],
                "example": 101.5
              }
            }
          }
        ]
      },
      "transfer": {
        "allOf": [
          {
            "$ref": "#/components/schemas/operation"
          },
          {
            "type": "object",
            "required": [
              "sender"
            ],
            "properties": {
              "sender": {
                "$ref": "#/components/schemas/correspondent"
              },
              "receiver": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/correspondent"
                  }
                ],
                "example": {
                  "id": "df9d59bc-a237-4972-9b09-08ffdc01a399",
                  "firstname": "Jane",
                  "lastname": "Doe",
                  "phone": "+44 20 1311 7711",
                  "location": {
                    "id": "f3d7a372-dcb9-4f86-b6d3-3639e4a70a4b",
                    "code": "LN",
                    "name": "Lonigo",
                    "country": {
                      "id": "19241586-e09a-4cda-9a34-31561f8097e1",
                      "code": "ITA",
                      "name": "Italy"
                    }
                  }
                }
              }
            }
          }
        ]
      },
      "send": {
        "allOf": [
          {
            "$ref": "#/components/schemas/transfer"
          },
          {
            "type": "object",
            "properties": {
              "amount": {
                "description": "Amount to send",
                "allOf": [
                  {
                    "$ref": "#/components/schemas/amount"
                  }
                ],
                "example": 100
              },
              "currency": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/currency_code"
                  }
                ],
                "description": "Currency code of the operation",
                "example": "USD"
              },
              "destination": {
                "description": "Destination city where to send money",
                "allOf": [
                  {
                    "$ref": "#/components/schemas/city"
                  }
                ]
              },
              "contract": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/transfer_send_contract"
                  }
                ],
                "description": "TODO"
              },
              "summary": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/transfer_send_summary"
                  }
                ],
                "description": "Execution summary of the transfer operation. For future use could include additional fields."
              }
            }
          }
        ]
      },
      "payout": {
        "allOf": [
          {
            "$ref": "#/components/schemas/transfer"
          },
          {
            "type": "object",
            "required": [
              "receiver",
              "code",
              "contract"
            ],
            "properties": {
              "code": {
                "type": "string",
                "description": "Code assigned to the operation on successful execution. Usually it comdes from external system (eg. Money Transfer System)",
                "example": "FT23098230757"
              },
              "contract": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/transfer_payout_contract"
                  }
                ],
                "description": "TODO"
              },
              "summary": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/transfer_payout_summary"
                  }
                ],
                "description": "Execution summary of the transfer operation. For future use could include additional fields."
              }
            }
          }
        ]
      }
    }
  }
}
